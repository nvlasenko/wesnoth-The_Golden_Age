#textdomain wesnoth-units
[unit_type]
    id=Divine Carapace
    name="Divine Carapace"
    race=carapace
    gender=male
    image="units/carapaces/divine.png"
    profile="portraits/carapace-elder.png"
    hitpoints=47
    movement_type=monsterfoot
    movement=5
    experience=150
    level=3
    alignment=neutral
    advances_to=null
    {AMLA_DEFAULT}
    {MAGENTA_IS_THE_TEAM_COLOR}
    cost=45
    undead_variation=drake
    usage=mixed fighter
    description="Divine Carapace, Divaloss is more than 200 years old. He is one of the fewest carapaces who has magical power. He can also feel the signs of some creatures from the distance, but it only works for limited creatures."+{SPECIAL_NOTES}+{SPECIAL_NOTES_CURES}+{SPECIAL_NOTES_ARCANE}+{SPECIAL_NOTES_MAGICAL}+{SPECIAL_NOTES_RECOVERY}

    die_sound=drake-die.ogg
    {DEFENSE_ANIM "units/carapaces/divine-defend.png" "units/carapaces/divine.png" {SOUND_LIST:DRAKE_HIT} }
    [portrait]
        size=400
        side="left"
        mirror="false"
        image="portraits/carapace-elder.png"
    [/portrait]
    [portrait]
        size=400
        side="right"
        mirror="true"
        image="portraits/carapace-elder.png"
    [/portrait]
    [abilities]
        {ABILITY_CURES}
        [regenerate]
            value=4
            id=recovery
            name= _ "recovery"
            female_name= _ "female^recovery"
            description= _ "The unit will heal itself 4 HP per turn. If it is poisoned, it will remove the poison instead of healing."
            affect_self=yes
            poison=cured
        [/regenerate]
    [/abilities]
    [advancement]
        strict_amla=yes
        max_times=1
        id=rotm_amla_divine_2
        description= _ "staff (+1 damage to staff, no heal full)"
        image=attacks/staff-ruby.png
        [effect]
            apply_to=attack
            name=staff
            increase_damage=1
        [/effect]
    [/advancement]
    [advancement]
        strict_amla=yes
        max_times=2
        id=rotm_amla_divine_1
        description= _ "crystal rod (+1 damage to crystal rod, no heal full)"
        image=attacks/iceball.png
        [effect]
            apply_to=attack
            name=crystal rod
            increase_damage=1
        [/effect]
    [/advancement]
    [defend]
        start_time=-175
        [frame]
            duration=25
            image="units/carapaces/divine.png"
            halo=halo/elven/elven-shield-halo-20pct.png
        [/frame]
        [frame]
            duration=25
            image="units/carapaces/divine.png"
            halo=halo/elven/elven-shield-halo-40pct.png
        [/frame]
        [frame]
            duration=50
            image="units/carapaces/divine-defend.png"
            halo=halo/elven/elven-shield-halo-60pct.png
        [/frame]
        [frame]
            duration=50
            image="units/carapaces/divine-defend.png"
            halo=halo/elven/elven-shield-halo-80pct.png
        [/frame]
        [if]
            hits=hit
            [frame]
                duration=100
                image="units/carapaces/divine-defend.png"
                sound={SOUND_LIST:DRAKE_HIT}
                halo=halo/elven/elven-shield-halo-100pct.png
            [/frame]
        [/if]
        [else]
            hits=miss,kill
            [frame]
                duration=100
                image="units/carapaces/divine-defend.png"
                halo=halo/elven/elven-shield-halo-100pct.png
            [/frame]
        [/else]
        [frame]
            duration=50
            image="units/carapaces/divine-defend.png"
            halo=halo/elven/elven-shield-halo-80pct.png
        [/frame]
        [frame]
            duration=25
            image="units/carapaces/divine.png"
            halo=halo/elven/elven-shield-halo-60pct.png
        [/frame]
        [frame]
            duration=25
            image="units/carapaces/divine.png"
            halo=halo/elven/elven-shield-halo-40pct.png
        [/frame]
        [frame]
            duration=25
            image="units/carapaces/divine.png"
            halo=halo/elven/elven-shield-halo-20pct.png
        [/frame]
    [/defend]

    [healing_anim]
        start_time=-300
        [frame]
            duration=50
            image="units/carapaces/divine.png"
            halo=halo/saurian-magic-halo-1.png
        [/frame]
        [frame]
            duration=60
            image="units/carapaces/divine.png"
            halo=halo/saurian-magic-halo-2.png
        [/frame]
        [frame]
            duration=70
            image="units/carapaces/divine-magic.png"
            halo=halo/saurian-magic-halo-3.png
        [/frame]
        [frame]
            duration=80
            image="units/carapaces/divine-magic.png"
            halo=halo/saurian-magic-halo-4.png
        [/frame]
        [frame]
            duration=90
            image="units/carapaces/divine-magic.png"
            halo=halo/saurian-magic-halo-5.png
        [/frame]
        [frame]
            duration=100
            image="units/carapaces/divine.png"
            halo=halo/saurian-magic-halo-6.png
        [/frame]
        [frame]
            duration=100
            image="units/carapaces/divine.png"
            halo=halo/saurian-magic-halo-7.png
        [/frame]
    [/healing_anim]
    [attack]
        name=staff
        description="staff"
        icon=attacks/staff-ruby.png
        type=impact
        range=melee
        damage=7
        number=2
    [/attack]
    [attack]
        name=crystal rod
        description="crystal rod"
        icon=attacks/explosion-sky-3.png
        type=arcane
        range=ranged
        damage=9
        number=3
        [specials]
            {WEAPON_SPECIAL_MAGICAL}
        [/specials]
    [/attack]
    [attack_anim]
        [filter_attack]
            name=staff
        [/filter_attack]
        start_time=-200
        [frame]
            image="units/carapaces/divine.png:100"
        [/frame]
        [if]
            hits=yes
            [frame]
                image="units/carapaces/divine-magic.png:100"
                sound=staff.wav
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                image="units/carapaces/divine-magic.png:100"
                sound={SOUND_LIST:MISS}
            [/frame]
        [/else]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=crystal rod
        [/filter_attack]
        offset=0

        {MAGIC_MISSILE 11 -20}
        {MAGIC_MISSILE_STAFF_FLARE -750 600 11 -20}
        start_time=-450
        [frame]
            image="units/carapaces/divine-magic.png:100"
        [/frame]
        [if]
            hits=yes
            [frame]
                image="units/carapaces/divine-magic.png:250"
                sound=magic-missile-1.ogg,magic-missile-2.ogg,magic-missile-3.ogg
            [/frame]
        [/if]
        [if]
            hits=no
            [frame]
                image="units/carapaces/divine-magic.png:250"
                sound=magic-missile-1-miss.ogg,magic-missile-2-miss.ogg,magic-missile-3-miss.ogg
            [/frame]
        [/if]

        [frame]
            image="units/carapaces/divine.png:200"
        [/frame]
    [/attack_anim]
[/unit_type]  
    
    
    
