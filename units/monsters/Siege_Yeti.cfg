#textdomain wesnoth-units
[unit_type]
    id=Siege Yeti
    name= _ "Siege Yeti"
    race=monster
    image="units/monsters/siegeyeti.png"
    hitpoints=180
    movement_type=largefoot
    movement=4
    experience=250
    level=5
    alignment=neutral
    advances_to=null
    {AMLA_DEFAULT}
    cost=100
    undead_variation=troll
    usage=fighter
    description= _ "Tamed Yetis sometimes are equipped with armor and unusually large hammers. This makes them more durable and makes them able to inflict more damage, but they become slower and easier to hit due to the weight of their equipment."
    die_sound=yeti-die.ogg
    {DEFENSE_ANIM "units/monsters/siegeyetidefend.png" "units/monsters/siegeyeti.png" yeti-hit.ogg}
	[defense]
		shallow_water=90
		reef=80
		swamp_water=90
		flat=80
		sand=80
		desert=80
		forest=60
		hills=60
		village=70
		castle=60
		cave=70
		frozen=50
		fungus=60
		mountains=50
	[/defense]
    [resistance]
        cold=60
        fire=90
        pierce=40
        impact=70
        arcane=100
	blade=50
    [/resistance]
    [attack]
        name=hammer
        description=_"hammer"
        icon=attacks/hammer-troll.png
        type=impact
        range=melee
        damage=40
        number=2
        [specials]
    [dummy]
        id=shockwave
        name="shockwave"
        name_inactive="shockwave"
        description= _ "If this attack misses, it will still do 20% of the original damage due to the sheer power of the shockwave caused by the attack. Damage dealt this way won't be able kill though."
    [/dummy]
        [/specials]
    [/attack]
    [attack]
        name=fist
        description=_"fist"
        icon=attacks/fist-yeti.png
        type=impact
        range=melee
        damage=24
        number=3
        [specials]
    [dummy]
        id=shockwave
        name="shockwave"
        name_inactive="shockwave"
        description= _ "If this attack misses, it will still do 20% of the original damage due to the sheer power of the shockwave caused by the attack. Damage dealt this way won't be able kill though."
    [/dummy]
        [/specials]
    [/attack]
        [attack_anim]
        [filter_attack]
            name=hammer
        [/filter_attack]
        offset=0.0~-0.1,-0.1~0.4,0.4~0.5,0.5~0.4,0.4~0.2,0.2~0.0
        start_time=-300
        [sound_frame]
           sound=rumble.ogg
        [/sound_frame]
        sound_start_time=-100
        [frame]
            image="units/monsters/siegeyetiattack[1~3,1].png:[100*2,250,100]"
        [/frame]
        {SOUND:HIT_AND_MISS mace.wav {SOUND_LIST:MISS} -100}
        [frame]
            image="units/monsters/siegeyeti.png:100"
        [/frame]
    [/attack_anim]
        [attack_anim]
        [filter_attack]
            name=fist
        [/filter_attack]
        offset=0.0~-0.1,-0.1~0.4,0.4~0.5,0.5~0.4,0.4~0.2,0.2~0.0
        start_time=-300
        [sound_frame]
           sound=rumble.ogg
        [/sound_frame]
        sound_start_time=-100
        [frame]
            image="units/monsters/siegeyetiattack2-[1~3,1].png:[100*2,250,100]"
        [/frame]
        {SOUND:HIT_AND_MISS fist.ogg {SOUND_LIST:MISS} -100}
        [frame]
            image="units/monsters/siegeyeti.png:100"
        [/frame]
    [/attack_anim]
    [event]
        name=attacker misses
        first_time_only=no
        [filter_attack]
            special=shockwave
        [/filter_attack]
        [set_variable]
          name=weapon.damage
          multiply=0.2
        [/set_variable]
        [harm_unit]
            [filter]
                    x,y=$x2,$y2
            [/filter]
            [filter_second]
                x,y=$x1,$y1
            [/filter_second]
            amount=$weapon.damage
            alignment=$unit.alignment
            damage_type=$weapon.type
            experience=no
            kill=no
            fire_event=yes
	    animate=no
        [/harm_unit] 
    [/event]
    [event]
        name=defender misses
        first_time_only=no
        [filter_second_attack]
            special=shockwave
        [/filter_second_attack]
        [set_variable]
          name=second_weapon.damage
          multiply=0.2
        [/set_variable]
        [harm_unit]
            [filter]
                    x,y=$x1,$y1
            [/filter]
            [filter_second]
                x,y=$x2,$y2
            [/filter_second]
            amount=$second_weapon.damage
            alignment=$second_unit.alignment
            damage_type=$second_weapon.type
            experience=no
            kill=no
            fire_event=yes
	    animate=no
        [/harm_unit] 
    [/event]
[/unit_type]
